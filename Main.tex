\documentclass[12pt,a4paper,oneside]{book}
\usepackage[T1]{fontenc}
\usepackage[english]{babel}
\usepackage[sharp]{easylist}
\usepackage[pdftex]{graphicx}
\usepackage{natbib}
\usepackage[font={small}]{caption}
\usepackage{longtable}
\usepackage{subcaption}
\usepackage{pdflscape} 
\usepackage[locale=UK]{siunitx} % Formats the units and values
\usepackage{rotating}
\usepackage{pdflscape}
\usepackage[inner=4cm,outer=4cm,top=3cm,bottom=3cm]{geometry}
\usepackage{inconsolata}
\usepackage{datatool}
\usepackage{blindtext}
\usepackage{scrextend}
\usepackage[inline]{enumitem}
\usepackage{wrapfig}
\usepackage{sidecap}
\usepackage{setspace}
\usepackage{algorithm2e}
\usepackage{algpseudocode}
\usepackage{pbox}
\usepackage{listings}
\usepackage[acronym]{glossaries}
\usepackage{xcolor}
\usepackage[pdfencoding=auto,psdextra]{hyperref}
\usepackage{xargs}   
\usepackage[all]{nowidow}
\usepackage{pdfpages}
\usepackage{coloremoji}
\usepackage[colorinlistoftodos,prependcaption,textsize=tiny]{todonotes}
\newcommandx{\unsure}[2][1=]{\todo[linecolor=red,backgroundcolor=red!25,bordercolor=red,#1]{#2}}
\newcommandx{\change}[2][1=]{\todo[linecolor=blue,backgroundcolor=blue!25,bordercolor=blue,#1]{#2}}
\newcommandx{\info}[2][1=]{\todo[linecolor=OliveGreen,backgroundcolor=OliveGreen!25,bordercolor=OliveGreen,#1]{#2}}
\newcommandx{\improvement}[2][1=]{\todo[linecolor=Plum,backgroundcolor=Plum!25,bordercolor=Plum,#1]{#2}}
\newcommandx{\thiswillnotshow}[2][1=]{\todo[disable,#1]{#2}}


\lstloadlanguages{Ruby}
%\lstset{ 
%basicstyle=\footnotesize\color{black},
%commentstyle = \footnotesize\color{red},
%keywordstyle=\footnotesize\color{blue},
%stringstyle=\footnotesize\color{orange}
%}

\lstnewenvironment{code}[1][]%
  {\noindent\minipage{\linewidth}\medskip 
   \lstset{
   basicstyle=\footnotesize\ttfamily, % Standardschrift
         numbers=left,               % Ort der Zeilennummern
         numberstyle=\tiny,          % Stil der Zeilennummern
         %stepnumber=2,               % Abstand zwischen den Zeilennummern
         numbersep=5pt,              % Abstand der Nummern zum Text
         tabsize=2,                  % Groesse von Tabs
         extendedchars=true,         %
         breaklines=true,            % Zeilen werden Umgebrochen
         keywordstyle=\color{blue},
            frame=b,         
 %        keywordstyle=[1]\textbf,    % Stil der Keywords
 %        keywordstyle=[2]\textbf,    %
 %        keywordstyle=[3]\textbf,    %
 %        keywordstyle=[4]\textbf,   \sqrt{\sqrt{}} %
         stringstyle=\color{red}\ttfamily, % Farbe der String
         showspaces=false,           % Leerzeichen anzeigen ?
         showtabs=false,             % Tabs anzeigen ?
         xleftmargin=17pt,
         framexleftmargin=17pt,
         framexrightmargin=5pt,
         framexbottommargin=4pt,
         %backgroundcolor=\color{lightgray},
         showstringspaces=false      % Leerzeichen in Strings anzeigen ?  
   %basicstyle=\ttfamily\footnotesize,
        frame=single,
   #1}}
  {\endminipage}

\DeclareCaptionFont{white}{\color{white}}
\DeclareCaptionFormat{listing}{\colorbox[cmyk]{0.43, 0.35, 0.35,0.01}{\parbox{\textwidth}{\hspace{15pt}#1#2#3}}}
\captionsetup[lstlisting]{  format=listing,labelfont=white,textfont=white, singlelinecheck=false, margin=0pt, font={bf,footnotesize}
}

\lstnewenvironment{code_2}[1][]%
  {\noindent
  \minipage{\linewidth}
   \medskip 
   \lstset{
   basicstyle=\tiny\ttfamily, % Standardschrift
         numbers=left,               % Ort der Zeilennummern
         numberstyle=\tiny,          % Stil der Zeilennummern
         %stepnumber=2,               % Abstand zwischen den Zeilennummern
         numbersep=5pt,              % Abstand der Nummern zum Text
         tabsize=2,                  % Groesse von Tabs
         extendedchars=true,         %
         breaklines=true,            % Zeilen werden Umgebrochen
         keywordstyle=\color{blue},
            frame=b,         
         stringstyle=\color{red}\ttfamily, % Farbe der String
         showspaces=false,           % Leerzeichen anzeigen ?
         showtabs=false,             % Tabs anzeigen ?
         xleftmargin=17pt,
         framexleftmargin=17pt,
         framexrightmargin=5pt,
         framexbottommargin=4pt,
         %backgroundcolor=\color{lightgray},
         showstringspaces=false      % Leerzeichen in 
        frame=single,
   #1}}
  {
  \endminipage
  }

\DeclareCaptionFont{white}{\color{white}}
\DeclareCaptionFormat{listing}{\colorbox[cmyk]{0.43, 0.35, 0.35,0.01}{\parbox{\textwidth}{\hspace{15pt}#1#2#3}}}
\captionsetup[lstlisting]{  format=listing,labelfont=white,textfont=white, singlelinecheck=false, margin=0pt, font={bf,footnotesize}
}


\newenvironment{blockquote}{%
  \par%
  \medskip
  \leftskip=4em\rightskip=2em%
  \noindent\ignorespaces}{%
  \par\medskip}


\captionsetup[subfigure]{position=top, labelfont=bf,textfont=normalfont,singlelinecheck=off,justification=raggedright}

\SetInd{0.5em}{0.5em}
\linespread{1.25}
\addtokomafont{labelinglabel}{\sffamily}
\usepackage{booktabs} % For \toprule, \midrule and \bottomrule
% start every dtl table with \toprule from booktabs
\renewcommand{\dtldisplaystarttab}{\small}

% likewise for \midrule and \bottomrule from booktabs 
\renewcommand{\dtldisplayafterhead}{\midrule}
\renewcommand{\dtldisplayendtab}{\\\bottomrule}


\newenvironment{processtable}[3]{\setbox\temptbox=\hbox{{\tablesize #2}}%
\tempdime\wd\temptbox\@processtable{#1}{#2}{#3}{\tempdime}}
{\relax}


\providecommand{\e}[1]{\ensuremath{\times 10^{#1}}}


% Setup siunitx:
\sisetup{
  round-mode          = places, % Rounds numbers
  round-precision     = 2, % to 2 places
  group-separator={,}
}

\newenvironment{localsize}[2]
{%
  \clearpage
  \let\orignewcommand\newcommand
  \let\newcommand\renewcommand
  \makeatletter
  \fontsize{#1pt}{#2pt}\selectfont
  %\tiny
  %\input{bk#1.clo}%
  \makeatother
  \let\newcommand\orignewcommand
}
{%
  \clearpage
}

\newenvironment{changemargin}[2]{%
\begin{list}{}{%
\setlength{\topsep}{0pt}%
\setlength{\leftmargin}{#1}%
\setlength{\rightmargin}{#2}%
\setlength{\listparindent}{\parindent}%
\setlength{\itemindent}{\parindent}%
\setlength{\parsep}{\parskip}%
}%
\item[]}{\end{list}}


\author{Ricardo Humberto Ramirez Gonzalez}
\title{Thesis}

\makeglossaries
\begin{document}
\tableofcontents
\listoffigures
\listoftables
\lstlistoflistings
\printglossaries

%\include{Introduction/Introduction}
\include{LitReview/LitReview}
\include{PolyMarker/PolyMarker}
\include{Yr15/Yr15}
\include{expVIP/expVIP}
\include{Conclusions/Conclusions}

\include{Abbreviations}

\appendix
\chapter{Supplemental tables}
\input{Yr15/Supplemental}
\input{PolyMarker/Supplemental}
\input{Appendices/qc}
\input{expVIP/tutorial}

\bibliographystyle{plainnat_short}
\bibliography{References}

\end{document}
